{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport config from \"../../config/index.js\";\nimport router from \"../../router/index\";\nconst authModules = {\n  state: {\n    isLogin: false,\n    rule: \"\"\n  },\n  getters: {\n    getIsLogin(state) {\n      return state.isLogin;\n    },\n\n    getRule(state) {\n      return state.rule;\n    }\n\n  },\n  mutations: {\n    LOGOUT(state) {\n      state.isLogin = false;\n    },\n\n    LOGIN(state) {\n      state.isLogin = true;\n    },\n\n    SET_RULE(state, newRule) {\n      state.rule = newRule;\n    }\n\n  },\n  actions: {\n    logout({\n      commit\n    }) {\n      localStorage.clear();\n      commit(\"LOGOUT\");\n    },\n\n    async login({\n      commit\n    }, account) {\n      const response = await axios.post(`${config.domain}/login`, {\n        username: account.username,\n        password: account.password\n      });\n      const rule = response.data.rule;\n      const accessToken = response.data.accessToken;\n      const accountInfor = response.data.accountInfor;\n\n      if (response.data.accessToken) {\n        localStorage.setItem(\"token\", accessToken);\n        localStorage.setItem(\"rule\", rule); // handle next page\n\n        if (rule == \"ADMIN\") {\n          router.push(\"/admin/home\");\n        } else if (rule == \"FREELANCER\") router.push(\"/freelancer/home\");else if (rule == \"ADVISER\") router.push(\"/adviser/home\");else if (rule == \"MINISTRY\") router.push(\"/ministry/home\");else if (rule == \"PROJECT\") router.push(\"/project/home\");\n\n        commit(\"LOGIN\"); // Save account login to store account\n\n        commit(\"SET_ACCOUNT\", accountInfor);\n      } // Hien thi thong bao\n\n\n      commit(\"SET_TOAST\", {\n        isSuccess: response.data.status,\n        message: response.data.message\n      });\n    },\n\n    async setRule({\n      commit\n    }) {\n      const token = localStorage.getItem(\"token\");\n      const res = await axios.post(`${config.domain}/get-rule`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const rule = res.data.rule;\n      commit(\"SET_RULE\", rule);\n    }\n\n  }\n};\nexport default authModules;","map":{"version":3,"names":["axios","config","router","authModules","state","isLogin","rule","getters","getIsLogin","getRule","mutations","LOGOUT","LOGIN","SET_RULE","newRule","actions","logout","commit","localStorage","clear","login","account","response","post","domain","username","password","data","accessToken","accountInfor","setItem","push","isSuccess","status","message","setRule","token","getItem","res","headers","Authorization"],"sources":["/Users/docaominh/Desktop/NLNKTPM/SUPLANCER/frontend/src/store/Modules/authModule.js"],"sourcesContent":["import axios from \"axios\";\nimport config from \"../../config/index.js\";\nimport router from \"../../router/index\";\nconst authModules = {\n  state: {\n    isLogin: false,\n    rule: \"\",\n  },\n  getters: {\n    getIsLogin(state) {\n      return state.isLogin;\n    },\n    getRule(state) {\n      return state.rule;\n    },\n  },\n\n  mutations: {\n    LOGOUT(state) {\n      state.isLogin = false;\n    },\n    LOGIN(state) {\n      state.isLogin = true;\n    },\n    SET_RULE(state, newRule) {\n      state.rule = newRule;\n    },\n  },\n  actions: {\n    logout({ commit }) {\n      localStorage.clear();\n      commit(\"LOGOUT\");\n    },\n    async login({ commit }, account) {\n      const response = await axios.post(`${config.domain}/login`, {\n        username: account.username,\n        password: account.password,\n      });\n\n      const rule = response.data.rule;\n      const accessToken = response.data.accessToken;\n      const accountInfor = response.data.accountInfor;\n\n      if (response.data.accessToken) {\n        localStorage.setItem(\"token\", accessToken);\n        localStorage.setItem(\"rule\", rule);\n        // handle next page\n\n        if (rule == \"ADMIN\") {\n          router.push(\"/admin/home\");\n        } else if (rule == \"FREELANCER\") router.push(\"/freelancer/home\");\n        else if (rule == \"ADVISER\") router.push(\"/adviser/home\");\n        else if (rule == \"MINISTRY\") router.push(\"/ministry/home\");\n        else if (rule == \"PROJECT\") router.push(\"/project/home\");\n\n        commit(\"LOGIN\");\n        // Save account login to store account\n        commit(\"SET_ACCOUNT\", accountInfor);\n      }\n\n      // Hien thi thong bao\n      commit(\"SET_TOAST\", {\n        isSuccess: response.data.status,\n        message: response.data.message,\n      });\n    },\n    async setRule({ commit }) {\n      const token = localStorage.getItem(\"token\");\n\n      const res = await axios.post(\n        `${config.domain}/get-rule`,\n        {},\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n\n      const rule = res.data.rule;\n\n      commit(\"SET_RULE\", rule);\n    },\n  },\n};\n\nexport default authModules;\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,uBAAnB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,MAAMC,WAAW,GAAG;EAClBC,KAAK,EAAE;IACLC,OAAO,EAAE,KADJ;IAELC,IAAI,EAAE;EAFD,CADW;EAKlBC,OAAO,EAAE;IACPC,UAAU,CAACJ,KAAD,EAAQ;MAChB,OAAOA,KAAK,CAACC,OAAb;IACD,CAHM;;IAIPI,OAAO,CAACL,KAAD,EAAQ;MACb,OAAOA,KAAK,CAACE,IAAb;IACD;;EANM,CALS;EAclBI,SAAS,EAAE;IACTC,MAAM,CAACP,KAAD,EAAQ;MACZA,KAAK,CAACC,OAAN,GAAgB,KAAhB;IACD,CAHQ;;IAITO,KAAK,CAACR,KAAD,EAAQ;MACXA,KAAK,CAACC,OAAN,GAAgB,IAAhB;IACD,CANQ;;IAOTQ,QAAQ,CAACT,KAAD,EAAQU,OAAR,EAAiB;MACvBV,KAAK,CAACE,IAAN,GAAaQ,OAAb;IACD;;EATQ,CAdO;EAyBlBC,OAAO,EAAE;IACPC,MAAM,CAAC;MAAEC;IAAF,CAAD,EAAa;MACjBC,YAAY,CAACC,KAAb;MACAF,MAAM,CAAC,QAAD,CAAN;IACD,CAJM;;IAKP,MAAMG,KAAN,CAAY;MAAEH;IAAF,CAAZ,EAAwBI,OAAxB,EAAiC;MAC/B,MAAMC,QAAQ,GAAG,MAAMtB,KAAK,CAACuB,IAAN,CAAY,GAAEtB,MAAM,CAACuB,MAAO,QAA5B,EAAqC;QAC1DC,QAAQ,EAAEJ,OAAO,CAACI,QADwC;QAE1DC,QAAQ,EAAEL,OAAO,CAACK;MAFwC,CAArC,CAAvB;MAKA,MAAMpB,IAAI,GAAGgB,QAAQ,CAACK,IAAT,CAAcrB,IAA3B;MACA,MAAMsB,WAAW,GAAGN,QAAQ,CAACK,IAAT,CAAcC,WAAlC;MACA,MAAMC,YAAY,GAAGP,QAAQ,CAACK,IAAT,CAAcE,YAAnC;;MAEA,IAAIP,QAAQ,CAACK,IAAT,CAAcC,WAAlB,EAA+B;QAC7BV,YAAY,CAACY,OAAb,CAAqB,OAArB,EAA8BF,WAA9B;QACAV,YAAY,CAACY,OAAb,CAAqB,MAArB,EAA6BxB,IAA7B,EAF6B,CAG7B;;QAEA,IAAIA,IAAI,IAAI,OAAZ,EAAqB;UACnBJ,MAAM,CAAC6B,IAAP,CAAY,aAAZ;QACD,CAFD,MAEO,IAAIzB,IAAI,IAAI,YAAZ,EAA0BJ,MAAM,CAAC6B,IAAP,CAAY,kBAAZ,EAA1B,KACF,IAAIzB,IAAI,IAAI,SAAZ,EAAuBJ,MAAM,CAAC6B,IAAP,CAAY,eAAZ,EAAvB,KACA,IAAIzB,IAAI,IAAI,UAAZ,EAAwBJ,MAAM,CAAC6B,IAAP,CAAY,gBAAZ,EAAxB,KACA,IAAIzB,IAAI,IAAI,SAAZ,EAAuBJ,MAAM,CAAC6B,IAAP,CAAY,eAAZ;;QAE5Bd,MAAM,CAAC,OAAD,CAAN,CAZ6B,CAa7B;;QACAA,MAAM,CAAC,aAAD,EAAgBY,YAAhB,CAAN;MACD,CAzB8B,CA2B/B;;;MACAZ,MAAM,CAAC,WAAD,EAAc;QAClBe,SAAS,EAAEV,QAAQ,CAACK,IAAT,CAAcM,MADP;QAElBC,OAAO,EAAEZ,QAAQ,CAACK,IAAT,CAAcO;MAFL,CAAd,CAAN;IAID,CArCM;;IAsCP,MAAMC,OAAN,CAAc;MAAElB;IAAF,CAAd,EAA0B;MACxB,MAAMmB,KAAK,GAAGlB,YAAY,CAACmB,OAAb,CAAqB,OAArB,CAAd;MAEA,MAAMC,GAAG,GAAG,MAAMtC,KAAK,CAACuB,IAAN,CACf,GAAEtB,MAAM,CAACuB,MAAO,WADD,EAEhB,EAFgB,EAGhB;QACEe,OAAO,EAAE;UACPC,aAAa,EAAG,UAASJ,KAAM;QADxB;MADX,CAHgB,CAAlB;MAUA,MAAM9B,IAAI,GAAGgC,GAAG,CAACX,IAAJ,CAASrB,IAAtB;MAEAW,MAAM,CAAC,UAAD,EAAaX,IAAb,CAAN;IACD;;EAtDM;AAzBS,CAApB;AAmFA,eAAeH,WAAf"},"metadata":{},"sourceType":"module"}