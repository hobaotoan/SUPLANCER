{"ast":null,"code":"// import axios from \"axios\";\n// import config from \"../config/index\";\n// import store from \"../store/index\";\nconst guardRouter = function (router) {\n  let stop = false; // const token = localStorage.getItem(\"token\");\n  // store.dispatch(\"setRule\");\n  // console.log(store.getters);\n  // console.log(store.getters.getRule);\n  // const res = await axios.post(\n  //     `${config.domain}/get-rule`,\n  //     {},\n  //     {\n  //         headers: {\n  //             Authorization: `Bearer ${token}`,\n  //         },\n  //     }\n  // );\n  // const rule = res.data.rule;\n\n  router.beforeEach(async (to, form, next) => {\n    const rule = localStorage.getItem(\"rule\"); // Not login then redirect to login\n\n    if (!rule && to.fullPath != \"/login\") {\n      next(\"/login\");\n    } // if (!rule && to.fullPath != \"/register\") {\n    //     next(\"/register\");\n    // }\n    // Logedin then redirect to home\n    else if (rule && to.fullPath == \"/login\") {\n      if (rule == \"ADMIN\") next(\"/admin/home\");else if (rule == \"PROJECT\") next(\"/project/home\");else if (rule == \"FREELANCER\") next(\"/freelancer/home\");else if (rule == \"MINISTRY\") next(\"/ministry/home\");else if (rule == \"LEADER\") next(\"/leader/home\");\n    } else {\n      // if accessing the site is not authorized. will be blocked\n      const uri = rule || \"/none\";\n\n      if (!to.fullPath.includes(`/${uri.toLowerCase()}`) && !stop) {\n        stop = true;\n        next(\"/error\");\n      } // All good\n      else next();\n    }\n  });\n};\n\nexport default guardRouter;","map":{"version":3,"names":["guardRouter","router","stop","beforeEach","to","form","next","rule","localStorage","getItem","fullPath","uri","includes","toLowerCase"],"sources":["C:/Users/Admin/Downloads/internship-management-main/internship-management-main/frontend/src/router/guard-router.js"],"sourcesContent":["// import axios from \"axios\";\n// import config from \"../config/index\";\n// import store from \"../store/index\";\nconst guardRouter = function (router) {\n    let stop = false;\n\n    // const token = localStorage.getItem(\"token\");\n\n    // store.dispatch(\"setRule\");\n    // console.log(store.getters);\n\n    // console.log(store.getters.getRule);\n\n    // const res = await axios.post(\n    //     `${config.domain}/get-rule`,\n    //     {},\n    //     {\n    //         headers: {\n    //             Authorization: `Bearer ${token}`,\n    //         },\n    //     }\n    // );\n\n    // const rule = res.data.rule;\n\n    router.beforeEach(async (to, form, next) => {\n        const rule = localStorage.getItem(\"rule\");\n\n        // Not login then redirect to login\n        if (!rule && to.fullPath != \"/login\") {\n            next(\"/login\");\n        }\n        // if (!rule && to.fullPath != \"/register\") {\n        //     next(\"/register\");\n        // }\n\n        // Logedin then redirect to home\n        else if (rule && to.fullPath == \"/login\") {\n            if (rule == \"ADMIN\") next(\"/admin/home\");\n            else if (rule == \"PROJECT\") next(\"/project/home\");\n            else if (rule == \"FREELANCER\") next(\"/freelancer/home\");\n            else if (rule == \"MINISTRY\") next(\"/ministry/home\");\n            else if (rule == \"LEADER\") next(\"/leader/home\");\n        }else {\n            // if accessing the site is not authorized. will be blocked\n            const uri = rule || \"/none\";\n            if (!to.fullPath.includes(`/${uri.toLowerCase()}`) && !stop) {\n                stop = true;\n                next(\"/error\");\n            }\n\n            // All good\n            else next();\n        }\n    });\n};\n\nexport default guardRouter;\n"],"mappings":"AAAA;AACA;AACA;AACA,MAAMA,WAAW,GAAG,UAAUC,MAAV,EAAkB;EAClC,IAAIC,IAAI,GAAG,KAAX,CADkC,CAGlC;EAEA;EACA;EAEA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;;EAEAD,MAAM,CAACE,UAAP,CAAkB,OAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB,KAA0B;IACxC,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb,CADwC,CAGxC;;IACA,IAAI,CAACF,IAAD,IAASH,EAAE,CAACM,QAAH,IAAe,QAA5B,EAAsC;MAClCJ,IAAI,CAAC,QAAD,CAAJ;IACH,CAFD,CAGA;IACA;IACA;IAEA;IAPA,KAQK,IAAIC,IAAI,IAAIH,EAAE,CAACM,QAAH,IAAe,QAA3B,EAAqC;MACtC,IAAIH,IAAI,IAAI,OAAZ,EAAqBD,IAAI,CAAC,aAAD,CAAJ,CAArB,KACK,IAAIC,IAAI,IAAI,SAAZ,EAAuBD,IAAI,CAAC,eAAD,CAAJ,CAAvB,KACA,IAAIC,IAAI,IAAI,YAAZ,EAA0BD,IAAI,CAAC,kBAAD,CAAJ,CAA1B,KACA,IAAIC,IAAI,IAAI,UAAZ,EAAwBD,IAAI,CAAC,gBAAD,CAAJ,CAAxB,KACA,IAAIC,IAAI,IAAI,QAAZ,EAAsBD,IAAI,CAAC,cAAD,CAAJ;IAC9B,CANI,MAMC;MACF;MACA,MAAMK,GAAG,GAAGJ,IAAI,IAAI,OAApB;;MACA,IAAI,CAACH,EAAE,CAACM,QAAH,CAAYE,QAAZ,CAAsB,IAAGD,GAAG,CAACE,WAAJ,EAAkB,EAA3C,CAAD,IAAkD,CAACX,IAAvD,EAA6D;QACzDA,IAAI,GAAG,IAAP;QACAI,IAAI,CAAC,QAAD,CAAJ;MACH,CAHD,CAKA;MALA,KAMKA,IAAI;IACZ;EACJ,CA7BD;AA8BH,CApDD;;AAsDA,eAAeN,WAAf"},"metadata":{},"sourceType":"module"}