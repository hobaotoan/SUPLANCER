{"ast":null,"code":"import { mapGetters } from \"vuex\";\nimport axios from \"axios\";\nimport config from \"../../../config/index.js\";\nexport default {\n  name: \"AssessAdvisers\",\n\n  data() {\n    return {\n      freelancerId: \"\",\n      points: [],\n      assessPoint: [],\n      time: \"\"\n    };\n  },\n\n  computed: { ...mapGetters({\n      freelancer: \"getFreelancerInfor\",\n      tasks: \"getProgressInfor\",\n      projectAssess: \"getProjectAssess\",\n      adviserAssess: \"getAdviserAssess\"\n    }),\n\n    startDate() {\n      return this.freelancer.startDate;\n    },\n\n    completedAssess() {\n      let pointLength = this.points.length; // Tong so diem danh gia cua cong ty la 15 diem. Neu chua du 15 co nghia la chua hoan tat danh gia.\n\n      if (pointLength === 0 || pointLength < 14) return false;else return true;\n    }\n\n  },\n\n  async created() {\n    this.freelancerId = this.$route.params.id;\n    const rule = localStorage.getItem(\"rule\").toLowerCase();\n    const payload = {\n      id: this.freelancerId,\n      rule\n    }; // Lay va dat diem danh gia cua cong ty vao Store de su dung.\n\n    await this.$store.dispatch(\"setProjectAssess\", payload);\n    this.points = this.projectAssess.points; // Lay va dat diem danh gia cua giang vien vao Store de su dung.\n\n    await this.$store.dispatch(\"setAdviserAssess\", payload); // Deep Clone diem danh gia cua giang vien!\n\n    this.assessPoint = JSON.parse(JSON.stringify(this.adviserAssess)); // Khoi tao diem danh gia de hien len giao dien!\n\n    this.setAssessPoint();\n  },\n\n  methods: {\n    // Tinh toan diem danh gia cua giang vien.\n    setAssessPoint() {\n      // Diem danh gia cua giang vien la null hoac rong hoac khong phai so thi dac mac dinh la 0\n      // for (let i = 0; i < 17; i++) {\n      //     if (\n      //         this.assessPoint[i] === null ||\n      //         this.assessPoint[i] === \"\" ||\n      //         this.assessPoint[i] === undefined\n      //     ) {\n      //         this.assessPoint[i] = 0;\n      //     }\n      // }\n      this.assessPoint = this.assessPoint.map(point => {\n        point = point === null || point === \"\" ? 0 : point;\n        return point;\n      });\n      this.assessPoint.forEach((point, index) => {\n        switch (index) {\n          case 0:\n            this.assessPoint[0] = 0;\n            break;\n\n          case 1:\n          case 2:\n            this.assessPoint[0] += point;\n            break;\n\n          case 3:\n            this.assessPoint[3] = 0;\n            break;\n\n          case 4:\n          case 5:\n          case 6:\n            this.assessPoint[3] += point;\n            break;\n\n          case 7:\n            this.assessPoint[7] = 0;\n            break;\n\n          case 8:\n          case 9:\n          case 10:\n          case 11:\n          case 12:\n          case 13:\n            this.assessPoint[7] += point;\n            break;\n\n          case 14:\n            this.assessPoint[14] = this.assessPoint[0] + this.assessPoint[3] + this.assessPoint[7];\n            break;\n\n          case 15:\n          case 16:\n            this.assessPoint[16] = this.assessPoint[14] - this.assessPoint[15];\n            break;\n        }\n      });\n    },\n\n    // Xu ly su kien <Luu danh gia>!\n    async assess(event) {\n      //Chan load lai trang\n      event.preventDefault(); //Xu ly diem danh gia cua giang vien.\n\n      this.setAssessPoint();\n      const token = localStorage.getItem(\"token\");\n      const response = await axios.put(`${config.domain}/adviser/assess-result`, {\n        freelancerId: this.freelancerId,\n        points: this.assessPoint\n      }, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      this.$store.dispatch(\"setToast\", {\n        isSuccess: true,\n        message: response.data.message\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["mapGetters","axios","config","name","data","freelancerId","points","assessPoint","time","computed","freelancer","tasks","projectAssess","adviserAssess","startDate","completedAssess","pointLength","length","created","$route","params","id","rule","localStorage","getItem","toLowerCase","payload","$store","dispatch","JSON","parse","stringify","setAssessPoint","methods","map","point","forEach","index","assess","event","preventDefault","token","response","put","domain","headers","Authorization","isSuccess","message"],"sourceRoot":"","sources":["/Users/docaominh/Desktop/NLNKTPM/SUPLANCER/frontend/src/components/Adviser/ProgressAssess/AdviserAssess.vue"],"sourcesContent":["<template>\n  <div class=\"assess-adviser animate__animated animate__fadeIn my-4\">\n    <div class=\"assess-adviser__title me-5 col-12\">\n      <h2 class=\"header-list label m-0 p-2 pt-2 fw-bold\" style=\"color: #555555\">\n        Đánh giá kết quả làm việc\n      </h2>\n      <div class=\"line my-3\"></div>\n    </div>\n    <div class=\"assess-adviser__detail my-4\">\n      <p class=\"assess-adviser__date\">\n        <strong>Thời gian làm việc:</strong>\n        <span> từ ngày {{ startDate }}</span>\n      </p>\n      <p class=\"assess-adviser__status\" v-if=\"completedAssess\">\n        <strong>Trạng thái đánh giá:</strong>\n        <span style=\"color: red\" v-if=\"assessPoint[16] === undefined\">\n          Chưa đánh giá</span\n        >\n        <span style=\"color: green\" v-else> Đã đánh giá</span>\n      </p>\n      <p style=\"color: red\" v-if=\"!completedAssess\">\n        Adviser chưa thể đánh giá vì đơn vị dự án chưa hoàn tất đánh giá.\n      </p>\n    </div>\n    <form\n      v-if=\"completedAssess\"\n      class=\"table-assess border rounded-4 p-3 col-9 d-flex m-auto flex-column\"\n    >\n      <table class=\"table\">\n        <thead>\n          <tr>\n            <th scope=\"col\" class=\"col-1\">STT</th>\n            <th scope=\"col\" class=\"col-8\">Nội dung đánh giá</th>\n            <th scope=\"col\" class=\"col-2\">Điểm tối đa</th>\n            <th scope=\"col\" class=\"col-1\">Điểm</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr style=\"font-weight: bold\">\n            <th scope=\"row\">I</th>\n            <td>Hình thức trình bày</td>\n            <td>1</td>\n            <td>{{ assessPoint[0] }}</td>\n          </tr>\n          <tr>\n            <th scope=\"row\">I.1</th>\n            <td>\n              Đúng format của khoa (Trang bìa, trang lời cảm ơn, trang đánh giá\n              thực tập của khoa, trang mục lục và các nội dung báo cáo). Sử dụng\n              đúng mã và font tiếng Việt (Unicode Times New Roman, Size 13)\n            </td>\n            <td>0.5</td>\n            <td>\n              <input\n                type=\"number\"\n                class=\"w-100 form-control\"\n                v-model=\"assessPoint[1]\"\n              />\n            </td>\n          </tr>\n          <tr>\n            <th scope=\"row\">I.2</th>\n            <td>Trình bày mạch lạc, súc tích, không có lỗi chính tả</td>\n            <td>0.5</td>\n            <td>\n              <input\n                type=\"number\"\n                class=\"w-100 form-control\"\n                v-model=\"assessPoint[2]\"\n              />\n            </td>\n          </tr>\n          <tr style=\"font-weight: bold\">\n            <th scope=\"row\">II</th>\n            <td>Phiếu theo dõi</td>\n            <td>4.75</td>\n            <td>{{ assessPoint[3] }}</td>\n          </tr>\n          <tr>\n            <th scope=\"row\">II.1</th>\n            <td>Có lịch làm việc đầy đủ cho 8 tuần</td>\n            <td>0.25</td>\n            <td>\n              <input\n                type=\"number\"\n                class=\"w-100 form-control\"\n                v-model=\"assessPoint[4]\"\n              />\n            </td>\n          </tr>\n          <tr>\n            <th scope=\"row\">II.2</th>\n            <td>\n              Số buổi thực tập tại cơ quan trong 1 tuần >=6; ít hơn 6 buổi 0.0\n              điểm\n            </td>\n            <td>1.0</td>\n            <td>\n              <input\n                type=\"number\"\n                class=\"w-100 form-control\"\n                v-model=\"assessPoint[5]\"\n              />\n            </td>\n          </tr>\n          <tr>\n            <th scope=\"row\">II.3</th>\n            <td>\n              Hoàn thành tốt kế hoạch công tác ghi trong lịch làm việc. Cách\n              tính điểm = (Điểm cộng của cán bộ hướng dẫn/100) x 3.5\n            </td>\n            <td>3.5</td>\n            <td>\n              <input\n                type=\"number\"\n                class=\"w-100 form-control\"\n                v-model=\"assessPoint[6]\"\n              />\n            </td>\n          </tr>\n          <tr style=\"font-weight: bold\">\n            <th scope=\"row\">III</th>\n            <td>Nội dung thực tập (quyển báo cáo)</td>\n            <td>4.25</td>\n            <td>{{ assessPoint[7] }}</td>\n          </tr>\n          <tr>\n            <th scope=\"row\">III.1</th>\n            <td>Có được sự hiểu biết tốt về cơ quan nơi thực tập</td>\n            <td>0.5</td>\n            <td>\n              <input\n                type=\"number\"\n                class=\"w-100 form-control\"\n                v-model=\"assessPoint[8]\"\n              />\n            </td>\n          </tr>\n          <tr>\n            <th scope=\"row\">III.2</th>\n            <td>\n              Phương pháp thực hiện phù hợp với nội dung công việc được giao\n            </td>\n            <td>1.0</td>\n            <td>\n              <input\n                type=\"number\"\n                class=\"w-100 form-control\"\n                v-model=\"assessPoint[9]\"\n              />\n            </td>\n          </tr>\n          <tr>\n            <th scope=\"row\">III.3</th>\n            <td>Kết quả củng cố lý thuyết</td>\n            <td>0.5</td>\n            <td>\n              <input\n                type=\"number\"\n                class=\"w-100 form-control\"\n                v-model=\"assessPoint[10]\"\n              />\n            </td>\n          </tr>\n          <tr>\n            <th scope=\"row\">III.4</th>\n            <td>Kết quả rèn luyện kỹ năng thực hành</td>\n            <td>0.5</td>\n            <td>\n              <input\n                type=\"number\"\n                class=\"w-100 form-control\"\n                v-model=\"assessPoint[11]\"\n              />\n            </td>\n          </tr>\n          <tr>\n            <th scope=\"row\">III.5</th>\n            <td>Kinh nghiệm thực tiễn thu nhận được</td>\n            <td>0.5</td>\n            <td>\n              <input\n                type=\"number\"\n                class=\"w-100 form-control\"\n                v-model=\"assessPoint[12]\"\n              />\n            </td>\n          </tr>\n          <tr>\n            <th scope=\"row\">III.6</th>\n            <td>Kết quả công việc có đóng góp cho cơ quan nơi thực tập</td>\n            <td>1.25</td>\n            <td>\n              <input\n                type=\"number\"\n                class=\"w-100 form-control\"\n                v-model=\"assessPoint[13]\"\n              />\n            </td>\n          </tr>\n          <tr>\n            <th></th>\n            <td>Cộng</td>\n            <td>10</td>\n            <td>{{ assessPoint[14] }}</td>\n          </tr>\n          <tr>\n            <th></th>\n            <td>Điểm trừ</td>\n            <td></td>\n            <td>\n              <input\n                type=\"number\"\n                class=\"w-100 form-control\"\n                v-model=\"assessPoint[15]\"\n              />\n            </td>\n          </tr>\n          <tr>\n            <th></th>\n            <td>Điểm còn lại</td>\n            <td></td>\n            <td>\n              {{\n                // assessPoint[14] ? assessPoint[14] - assessPoint[15] : 0\n                assessPoint[16]\n              }}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      <button\n        type=\"submit\"\n        class=\"btn btn-outline-warning col-2 ms-auto\"\n        @click=\"assess($event)\"\n      >\n        Lưu Đánh Giá\n      </button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport axios from \"axios\";\nimport config from \"../../../config/index.js\";\n\nexport default {\n  name: \"AssessAdvisers\",\n  data() {\n    return {\n      freelancerId: \"\",\n      points: [],\n      assessPoint: [],\n      time: \"\",\n    };\n  },\n  computed: {\n    ...mapGetters({\n      freelancer: \"getFreelancerInfor\",\n      tasks: \"getProgressInfor\",\n      projectAssess: \"getProjectAssess\",\n      adviserAssess: \"getAdviserAssess\",\n    }),\n    startDate() {\n      return this.freelancer.startDate;\n    },\n    completedAssess() {\n      let pointLength = this.points.length;\n      // Tong so diem danh gia cua cong ty la 15 diem. Neu chua du 15 co nghia la chua hoan tat danh gia.\n      if (pointLength === 0 || pointLength < 14) return false;\n      else return true;\n    },\n  },\n  async created() {\n    this.freelancerId = this.$route.params.id;\n    const rule = localStorage.getItem(\"rule\").toLowerCase();\n    const payload = { id: this.freelancerId, rule };\n    // Lay va dat diem danh gia cua cong ty vao Store de su dung.\n    await this.$store.dispatch(\"setProjectAssess\", payload);\n    this.points = this.projectAssess.points;\n    // Lay va dat diem danh gia cua giang vien vao Store de su dung.\n    await this.$store.dispatch(\"setAdviserAssess\", payload);\n\n    // Deep Clone diem danh gia cua giang vien!\n    this.assessPoint = JSON.parse(JSON.stringify(this.adviserAssess));\n    // Khoi tao diem danh gia de hien len giao dien!\n    this.setAssessPoint();\n  },\n  methods: {\n    // Tinh toan diem danh gia cua giang vien.\n    setAssessPoint() {\n      // Diem danh gia cua giang vien la null hoac rong hoac khong phai so thi dac mac dinh la 0\n      // for (let i = 0; i < 17; i++) {\n      //     if (\n      //         this.assessPoint[i] === null ||\n      //         this.assessPoint[i] === \"\" ||\n      //         this.assessPoint[i] === undefined\n      //     ) {\n      //         this.assessPoint[i] = 0;\n      //     }\n      // }\n      this.assessPoint = this.assessPoint.map((point) => {\n        point = point === null || point === \"\" ? 0 : point;\n        return point;\n      });\n      this.assessPoint.forEach((point, index) => {\n        switch (index) {\n          case 0:\n            this.assessPoint[0] = 0;\n            break;\n          case 1:\n          case 2:\n            this.assessPoint[0] += point;\n            break;\n          case 3:\n            this.assessPoint[3] = 0;\n            break;\n          case 4:\n          case 5:\n          case 6:\n            this.assessPoint[3] += point;\n            break;\n          case 7:\n            this.assessPoint[7] = 0;\n            break;\n          case 8:\n          case 9:\n          case 10:\n          case 11:\n          case 12:\n          case 13:\n            this.assessPoint[7] += point;\n            break;\n          case 14:\n            this.assessPoint[14] =\n              this.assessPoint[0] + this.assessPoint[3] + this.assessPoint[7];\n            break;\n          case 15:\n          case 16:\n            this.assessPoint[16] = this.assessPoint[14] - this.assessPoint[15];\n            break;\n        }\n      });\n    },\n\n    // Xu ly su kien <Luu danh gia>!\n    async assess(event) {\n      //Chan load lai trang\n      event.preventDefault();\n\n      //Xu ly diem danh gia cua giang vien.\n      this.setAssessPoint();\n      const token = localStorage.getItem(\"token\");\n      const response = await axios.put(\n        `${config.domain}/adviser/assess-result`,\n        { freelancerId: this.freelancerId, points: this.assessPoint },\n        {\n          headers: { Authorization: \"Bearer \" + token },\n        }\n      );\n      this.$store.dispatch(\"setToast\", {\n        isSuccess: true,\n        message: response.data.message,\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.score {\n  width: 100%;\n}\n.table-assess {\n  box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n}\n/* Chrome, Safari, Edge, Opera */\ninput::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}